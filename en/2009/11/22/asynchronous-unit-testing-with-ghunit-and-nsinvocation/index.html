<!DOCTYPE html>
<html lang="en" ng-app="App" ng-controller="MainController">
  <head>
    <link href="//fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Asynchronous unit testing with GHUnit and NSInvocation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">        
    <meta name="description" content="Moonshine Project official website
">
    <link rel="canonical" 
          href="http://moonshine-project.com//en/2009/11/22/asynchronous-unit-testing-with-ghunit-and-nsinvocation/">
    <link rel="shortcut icon" href="/assets/images/favicon.png">
    
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/bower_components/foundation/css/normalize.css">
    <link rel="stylesheet" href="/bower_components/angular-material/angular-material.css">
    <link rel="stylesheet" href="/bower_components/angular-material/themes/deep-purple-theme.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

    <!-- Modernizr js -->
    <script async src="/bower_components/modernizr/modernizr.js"></script>

    <!-- IE Fixes -->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->        
  </head>
  <body layout="horizontal" md-theme="deep-purple">
    <md-sidenav layout="vertical" component-id="left" class="md-sidenav-left md-whiteframe-z2" id="footered-sidenav" is-locked-open="$media('md')">
      <md-toolbar class="md-medium-tall" id="footered-sidenav-toolbar"></md-toolbar>
      <md-content layout="vertical" class="footered-sidenav-content">
        

  
    <a class="sidenav-item" href="http://moonshine-project.com//en/archive/">blog archive</a>
  

  

  
    <a class="sidenav-item" href="http://moonshine-project.com//en/workstyle/"></a>
  


        <div flex></div>
        <footer>
          <h2>Follow me</h2>


<h3>@akiraak</h3>
  <ul class="social-media">
    
    <li>
        <a title="akiraak on Github" 
           href="https://github.com/akiraak" 
           class="fi-social-github"><span class="fontawesome-text">Github</span></a>
    </li>
     
    
    <li>
        <a title="akira.kozakai on Facebook" 
           href="https://facebook.com/akira.kozakai" 
           class="fi-social-facebook"><span class="fontawesome-text">Facebook</span></a>
    </li>
    
    
    <li>
        <a title="akiraak on Twitter" 
           href="https://twitter.com/akiraak" 
           class="fi-social-twitter"><span class="fontawesome-text">Twitter</span></a>
    </li>
    
    
    
</ul>

<h3>@ento</h3>
  <ul class="social-media">
    
    <li>
        <a title="ento on Github" 
           href="https://github.com/ento" 
           class="fi-social-github"><span class="fontawesome-text">Github</span></a>
    </li>
     
    
    <li>
        <a title="entotto on Facebook" 
           href="https://facebook.com/entotto" 
           class="fi-social-facebook"><span class="fontawesome-text">Facebook</span></a>
    </li>
    
    
    <li>
        <a title="ento on Twitter" 
           href="https://twitter.com/ento" 
           class="fi-social-twitter"><span class="fontawesome-text">Twitter</span></a>
    </li>
    
    
    <li>
        <a title="+MaricaOdagaki on Google Plus" 
           href="https://plus.google.com/+MaricaOdagaki" 
           class="fi-social-google-plus"><span class="fontawesome-text">Google</span></a>
    </li>
    
    
    <li>
        <a title="maricaodagaki on LinkedIn" 
           href="https://linkedin.com/in/maricaodagaki" 
           class="fi-social-linkedin"><span class="fontawesome-text">LinkedIn</span></a>
    </li>
    
</ul>

  

          <p class="attribution"><a href="https://github.com/moonshine-project/moonshine-project.github.io#Colophon">Colophon</a></p>

        </footer>
      </md-content>
    </md-sidenav>
    <div layout="vertical" layout-fill role="main">
      <md-toolbar class="md-medium-tall">
        <header>
          <div class="md-toolbar-tools content-container">
            <button class="menu-icon" hide-md aria-label="Open Menu" ng-click="openMenu()">
              <span class="fi-list"></span>
            </button>
            <h1><a href="/">Moonshine Project</a></h1>
            <h2></h2>
            <span flex></span>
              
  
    <a href="/en/2009/11/22/asynchronous-unit-testing-with-ghunit-and-nsinvocation/" class="en">en</a>
  
    <a href="/ja/2009/12/01/async-testing-with-ghunit-and-nsinvocation/" class="ja">ja</a>
  


          </div>
        </header>
      </md-toolbar>
      <md-content ng-view scroll-y flex>
        <div class="content-container">
          <div class="page-content">
  <div class="post">
    <h1>Asynchronous unit testing with GHUnit and NSInvocation</h1>
    <div class="post-meta">22 Nov 2009 / ento /
      <span class="label secondary radius">dev</span>
    </div>
    <hr/>
    <div class="post-content">
      <h2>1. Decoupling the network access code</h2>

<p>Suppose you have an app that calls a remote API to store the user&#39;s rating of your content:</p>
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@implementation</span> <span class="nc">StarService</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">star:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">pictureNumber</span> <span class="nf">count:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">count</span> <span class="p">{</span>
    <span class="c1">// create the request</span>
    <span class="bp">NSString</span> <span class="o">*</span><span class="n">url</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;http://%@:%d/api/star/&quot;</span><span class="p">,</span> <span class="n">serviceHostname</span><span class="p">,</span> <span class="n">servicePort</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
    <span class="bp">NSMutableURLRequest</span> <span class="o">*</span><span class="n">theRequest</span><span class="o">=</span><span class="p">[</span><span class="bp">NSMutableURLRequest</span> <span class="nl">requestWithURL</span><span class="p">:[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="n">url</span><span class="p">]</span>
                                              <span class="nl">cachePolicy</span><span class="p">:</span><span class="n">NSURLRequestUseProtocolCachePolicy</span>
                                          <span class="nl">timeoutInterval</span><span class="p">:</span><span class="mf">60.0</span><span class="p">];</span>
    <span class="c1">// ... setup the API parameters and HTTP headers ...</span>
    <span class="n">StarRequestDelegate</span> <span class="o">*</span><span class="n">requestDelegate</span> <span class="o">=</span> <span class="p">[[</span><span class="n">StarRequestDelegate</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithService</span><span class="p">:</span><span class="nb">self</span> <span class="nl">delegate</span><span class="p">:</span><span class="n">serviceDelegate</span><span class="p">];</span>
    <span class="cm">/* Starting API call! */</span>
    <span class="bp">NSURLConnection</span> <span class="o">*</span><span class="n">theConnection</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURLConnection</span> <span class="nl">connectionWithRequest</span><span class="p">:</span><span class="n">aRequest</span> <span class="nl">delegate</span><span class="p">:</span><span class="n">requestDelegate</span><span class="p">];</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="c1">// NSURLConnection delegate for the star API call</span>
<span class="k">@implementation</span> <span class="nc">StarRequestDelegate</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">connectionDidFinishLoading:</span><span class="p">(</span><span class="bp">NSURLConnection</span> <span class="o">*</span><span class="p">)</span><span class="nv">connection</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">delegate</span> <span class="o">&amp;&amp;</span> <span class="p">[(</span><span class="bp">NSObject</span><span class="o">*</span><span class="p">)</span><span class="n">delegate</span> <span class="nl">respondsToSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">starService</span><span class="p">:</span><span class="nl">didFinishStar</span><span class="p">:)])</span> <span class="p">{</span>
        <span class="cm">/* API call returned normally, invoke the delegate&#39;s callback */</span>
        <span class="p">[</span><span class="n">delegate</span> <span class="nl">starService</span><span class="p">:</span><span class="n">service</span> <span class="nl">didFinishStar</span><span class="p">:</span><span class="n">receivedData</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="p">[</span><span class="nb">super</span> <span class="nl">connectionDidFinishLoading</span><span class="p">:</span><span class="n">connection</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>The first thing you want to do is to implement a fake version of the calling class to slice out the network dependency. Then you can use the fake service to develop other parts of the app without worrying about setting up the API server each time you do a test run.</p>
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@implementation</span> <span class="nc">FakeStarService</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">star:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">pictureNumber</span> <span class="nf">count:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">count</span> <span class="p">{</span>
    <span class="cm">/* invocation to call the delegate method directly */</span>
    <span class="bp">NSInvocation</span> <span class="o">*</span><span class="n">invocation</span><span class="p">;</span>
    <span class="p">[[</span><span class="bp">NSInvocation</span> <span class="nl">retainedInvocationWithTarget</span><span class="p">:</span><span class="n">serviceDelegate</span> <span class="nl">invocationOut</span><span class="p">:</span><span class="o">&amp;</span><span class="n">invocation</span><span class="p">]</span>
     <span class="nl">starService</span><span class="p">:</span><span class="nb">self</span> <span class="nl">didFinishStar</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

    <span class="cm">/* wrap it around with another invocation to simulate network delay */</span>
    <span class="bp">NSInvocation</span> <span class="o">*</span><span class="n">delayInvocation</span><span class="p">;</span>
    <span class="p">[[</span><span class="bp">NSInvocation</span> <span class="nl">retainedInvocationWithTarget</span><span class="p">:</span><span class="n">invocation</span> <span class="nl">invocationOut</span><span class="p">:</span><span class="o">&amp;</span><span class="n">delayInvocation</span><span class="p">]</span>
     <span class="nl">performSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">invoke</span><span class="p">)</span> <span class="nl">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">afterDelay</span><span class="p">:</span><span class="n">delay</span><span class="p">];</span>
    <span class="p">[</span><span class="n">delayInvocation</span> <span class="nl">performSelectorOnMainThread</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">invoke</span><span class="p">)</span> <span class="nl">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">waitUntilDone</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>Here I&#39;m creating two NSInvocations to simulate a delayed API call. Wait, there must be more to creating an NSInvocation? You&#39;re right. This code wouldn&#39;t be possible without the excellent <a href="http://cocoawithlove.com/2008/03/construct-nsinvocation-for-any-message.html">ForwardedConstruction extension</a> for NSInvocation.</p>

<p>To use the extension on iPhone, download the code from the original article and add/modify the following parts:</p>
<div class="highlight"><pre><code class="language-diff" data-lang="diff"><span class="gd">--- Downloads/NSInvocationForwardedConstruction/NSInvocation(ForwardedConstruction).h   2009-05-04 11:55:34.000000000 +0900</span>
<span class="gi">+++ NSInvocation(ForwardedConstruction).h   2009-12-02 10:17:07.000000000 +0900</span>
<span class="gu">@@ -11,7 +11,7 @@</span>
 //  appreciated but not required.
 //

<span class="gd">-#import &lt;Cocoa/Cocoa.h&gt;</span>
<span class="gi">+#import &lt;UIKit/UIKit.h&gt;</span>

 @interface NSInvocation (ForwardedConstruction)

<span class="gu">@@ -21,3 +21,10 @@</span>
    invocationOut:(NSInvocation **)invocationOut;

 @end
<span class="gi">+</span>
<span class="gi">+#if (TARGET_OS_IPHONE)</span>
<span class="gi">+@interface NSObject (ForwardedConstruction)</span>
<span class="gi">+- (NSString *)className;</span>
<span class="gi">++ (NSString *)className;</span>
<span class="gi">+@end</span>
<span class="gi">+#endif</span>
<span class="gd">--- Downloads/NSInvocationForwardedConstruction/NSInvocation+ForwardedConstruction.m    2009-05-04 11:55:34.000000000 +0900</span>
<span class="gi">+++ NSInvocation(ForwardedConstruction).m   2009-12-02 10:17:43.000000000 +0900</span>
<span class="gu">@@ -12,7 +12,9 @@</span>
 //

 #import &quot;NSInvocation(ForwardedConstruction).h&quot;
<span class="gd">-#import &lt;objc/objc-runtime.h&gt;</span>
<span class="gi">+//#import &lt;objc/objc-runtime.h&gt;</span>
<span class="gi">+#import &lt;objc/runtime.h&gt;</span>
<span class="gi">+#import &lt;objc/message.h&gt;</span>

 //
 // InvocationProxy is a private class for receiving invocations via the
<span class="gu">@@ -376,4 +378,21 @@</span>
    return invocationProxy;
 }

<span class="gi">+@end </span>
<span class="gi">+</span>
<span class="gi">+#if (TARGET_OS_IPHONE)</span>
<span class="gi">+</span>
<span class="gi">+@implementation NSObject (ForwardedConstruction)</span>
<span class="gi">+</span>
<span class="gi">+- (NSString *)className</span>
<span class="gi">+{</span>
<span class="gi">+   return [NSString stringWithUTF8String:class_getName([self class])];</span>
<span class="gi">+}</span>
<span class="gi">++ (NSString *)className</span>
<span class="gi">+{</span>
<span class="gi">+   return [NSString stringWithUTF8String:class_getName(self)];</span>
<span class="gi">+}</span>
<span class="gi">+</span>
 @end
<span class="gi">+</span>
<span class="gi">+#endif</span>
</code></pre></div>
<h2>2. Choosing the right thread</h2>

<p><a href="http://github.com/gabriel/gh-unit">GHUnit</a> is a test framework for Objective-C (Mac OS X 10.5 and iPhone 2.x/3.x) with a pretty GUI test runner. It has the ability to run itself on a separate thread, which comes in handy when dealing with NSURLConnection related tests.</p>

<p>Why? Because for some internal working of NSURLConnection, invoking it from the main thread seems to be the most hassle-free way of using. By having the test framework running on a separate thread, we can keep the network related code on the main thread while enjoying a smooth testing UI.</p>

<p>So here is the working setup I have:</p>
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="c1">// test cases for the real service class.</span>
<span class="c1">// there&#39;s another similar class for testing the fake service.</span>
<span class="k">@implementation</span> <span class="nc">HttpNetTest</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">shouldRunOnMainThread</span> <span class="p">{</span>
    <span class="cm">/* Tell GHUnit to run on a separate thread */</span>
    <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">test_send_star</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">tester</span> <span class="nl">do_test_send_star</span><span class="p">:</span><span class="n">service</span><span class="p">];</span>
<span class="p">}</span>

<span class="k">@implementation</span> <span class="nc">StarServiceTests</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">do_test_send_star:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">service</span> <span class="p">{</span>
    <span class="c1">// setup an invocation and</span>
    <span class="bp">NSInvocation</span> <span class="o">*</span><span class="n">invocation</span><span class="p">;</span>
    <span class="p">[[</span><span class="bp">NSInvocation</span> <span class="nl">retainedInvocationWithTarget</span><span class="p">:</span><span class="n">service</span> <span class="nl">invocationOut</span><span class="p">:</span><span class="o">&amp;</span><span class="n">invocation</span><span class="p">]</span>
      <span class="nl">star</span><span class="p">:</span><span class="mi">0</span> <span class="nl">count</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
    <span class="cm">/* invoke it on the main thread */</span>
    <span class="p">[</span><span class="n">invocation</span> <span class="nl">performSelectorOnMainThread</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">invoke</span><span class="p">)</span> <span class="nl">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">waitUntilDone</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>

    <span class="cm">/* wait */</span>
    <span class="kt">BOOL</span> <span class="n">notTimeout</span> <span class="o">=</span> <span class="p">[</span><span class="n">AsyncTestHelper</span> <span class="nl">wait</span><span class="p">:</span><span class="n">service</span><span class="p">.</span><span class="n">delegate</span> <span class="nl">property</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">receivedDidFinishGetStarsCount</span><span class="p">)</span> <span class="nl">atLeast</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>

    <span class="cm">/* asserts */</span>
    <span class="n">GHAssertTrue</span><span class="p">(</span><span class="n">notTimeout</span><span class="p">,</span> <span class="s">@&quot;Should not timeout&quot;</span><span class="p">);</span>
    <span class="n">GHAssertEquals</span><span class="p">((</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="n">service</span><span class="p">.</span><span class="n">delegate</span> <span class="n">receivedDidFinishStarCount</span><span class="p">],</span> <span class="s">@&quot;delegate should receive star callback&quot;</span><span class="p">);</span>     
<span class="p">}</span>
</code></pre></div>
<h2>3. Waiting for the async call to finish</h2>

<p>The final snippet is a little helper for testing asynchronous operation. You might have noticed the line using it in the test case:</p>
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@implementation</span> <span class="nc">StarServiceTests</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">do_test_send_star:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">service</span> <span class="p">{</span>
    <span class="c1">// .. </span>
    <span class="p">[</span><span class="n">AsyncTestHelper</span> <span class="nl">wait</span><span class="p">:</span><span class="n">service</span><span class="p">.</span><span class="n">delegate</span> <span class="nl">property</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">receivedDidFinishStarCount</span><span class="p">)</span> <span class="nl">atLeast</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">// ..</span>
<span class="p">}</span>
</code></pre></div>
<p>Basically the method just loops until the specified property value is equal or more than a certain threshold:</p>
<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">@implementation</span> <span class="nc">AsyncTestHelper</span>

<span class="p">+</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">wait:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">target</span> <span class="nf">property:</span><span class="p">(</span><span class="kt">SEL</span><span class="p">)</span><span class="nv">getter</span> <span class="nf">atLeast:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">count</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">tried</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span><span class="p">((</span><span class="bp">NSUInteger</span><span class="p">)[</span><span class="n">target</span> <span class="nl">performSelector</span><span class="p">:</span><span class="k">getter</span><span class="p">]</span>  <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nb">FALSE</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="p">[</span><span class="bp">NSThread</span> <span class="nl">sleepForTimeInterval</span><span class="p">:</span><span class="mf">0.5</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">TRUE</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Now you can get the pleasure of full green tests with iPhone network programming too.</p>

<p><img src="http://img.skitch.com/20091202-rdp1ea91iuxwcjtwpbndua1i9w.png" alt="ghunit_test_runner"></p>

<p>Finally, here&#39;s a class diagram of all the classes mentioned above, produced with a little help from Xcode&#39;s Core Data modeling interface.</p>

<p><img src="http://img.skitch.com/20091122-j6q7axd8up53qb1m1xdaxswrai.png" alt=""></p>

    </div>
  </div>

  
  <div class="related">
    <h4>Related Posts</h2>
    <ul class="posts">
        
        <li>
        <span>28 Jun 2013 &raquo;</span>
        <a href="http://moonshine-project.com//ja/2013/06/28/titanium-iphone-android-crossplatform-gotchas/">iPhone向けに作られたTitaniumアプリのAndroid対応で気をつけること</a>
        </li>
        
        <li>
        <span>18 Apr 2013 &raquo;</span>
        <a href="http://moonshine-project.com//ja/2013/04/18/mynovel-on-github/">小説を２倍に拡大表示してくれる「吾輩の小説」のコードを公開</a>
        </li>
        
        <li>
        <span>02 Jul 2010 &raquo;</span>
        <a href="http://moonshine-project.com//ja/2010/07/02/iphone-pixel-processing-optimization-with-neon/">iPhoneでのピクセル処理をNEON(ベクタ演算)を使って4倍高速化する</a>
        </li>
        
    </ul>
  </div>
  

  <div class="post-footer" layout="horizontal">
    <div flex="33" class="post-footer-prev">
      
        <a href="http://moonshine-project.com//ja/2009/10/19/iphone-using-crash-reports/"><< Older</a>
      
    </div>
    <div flex="33" class="post-footer-home"><a href="http://moonshine-project.com// ">Home</a></div>
    <div flex="33" class="post-footer-next">
      
        <a href="http://moonshine-project.com//ja/2009/11/26/kyoto-autumn-staff-pick/">Newer >></a>
      
    </div>
  </div>
</div>
 

        </div>
      </md-content>
    </div>
    <script src="/bower_components/angular/angular.js"></script>
    <script src="/bower_components/angular-aria/angular-aria.js"></script>
    <script src="/bower_components/angular-animate/angular-animate.js"></script>
    <script src="/bower_components/hammerjs/hammer.js"></script>
    <script src="/bower_components/angular-material/angular-material.js"></script>
    <script src="/assets/js/main.js"></script>
    
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-536501-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


  </body>        
</html>
